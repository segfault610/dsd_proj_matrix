`timescale 1ns/1ps

module tb_hill_cipher;

    //=================================================================
    // CUSTOMIZE YOUR TEST HERE
    //=================================================================
    parameter BLOCK_SIZE = 4;
    parameter DATA_WIDTH = 8;
    parameter CLK_PERIOD = 10;
    
    // Conservative fixed address widths (safe for BLOCK_SIZE up to 8)
    localparam KEY_ADDR_WIDTH = 6;   // 6 bits = 0-63 addresses
    localparam TEXT_ADDR_WIDTH = 3;  // 3 bits = 0-7 addresses
    
    reg [8*BLOCK_SIZE-1:0] plaintext = "HELP";
    integer key_values [0:BLOCK_SIZE*BLOCK_SIZE-1];
    //=================================================================
    
    reg clk, rst, start, mode;
    reg [DATA_WIDTH-1:0] key_data, text_in;
    reg [KEY_ADDR_WIDTH-1:0] key_addr;
    reg [TEXT_ADDR_WIDTH-1:0] text_in_addr;
    reg key_wen, text_in_wen;
    
    wire [DATA_WIDTH-1:0] text_out;
    wire text_out_valid;
    wire done;
    
    // ... rest of the code remains the same ...
